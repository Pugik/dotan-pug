<root> 
  	<script>	
		//
        // Just find HUDElements in panorama 
        //

        var Parent = $.GetContextPanel().GetParent().GetParent()
        var newUI = $.GetContextPanel().GetParent().GetParent().FindChildTraverse("HUDElements");

        // 
        // Disable neutral tab
        //

		newUI.FindChildTraverse("GridNeutralsTab").style.visibility = "collapse";

        // 
        // Disable minimal shop and guide shop
        //

		newUI.FindChildTraverse("ToggleMinimalShop").style.visibility = "collapse";

        // 
        // Disable talant tree
        //

		newUI.FindChildTraverse("StatBranch").style.visibility = "collapse";
        newUI.FindChildTraverse("StatBranchHotkey").style.visibility = "collapse";
        newUI.FindChildTraverse("level_stats_frame").style.visibility = "collapse";

        newUI.FindChildTraverse("StatBranchOuter").style.visibility = "collapse";

        //
        // Resize remaining shop tabs
        //

        newUI.FindChildTraverse("GridBasicsTab").style.width = "200px";
        
        newUI.FindChildTraverse("GridUpgradesTab").style.width = "200px";
        newUI.FindChildTraverse("GridUpgradesTab").style.margin = "0.0px 0.0px 0.0px 0.0px";

        // 
        // Legendary One Pixel Lift 
        //
        // Raised the list of items so that it is not on top of the anchored items.
        //

        newUI.FindChildTraverse("GridMainShopContents").FindChildTraverse("GridBasicItemsCategory").FindChildTraverse("GridBasicItems").style.padding = "-3.0px 0.0px 0.0px 0.0px";
        newUI.FindChildTraverse("GridMainShopContents").FindChildTraverse("GridUpgradesCategory").FindChildTraverse("GridUpgradeItems").style.padding = "-3.0px 0.0px 0.0px 0.0px";

        //
        //  In Neutral Items Tab (If you dont need it, just delete it)
        //

        newUI.FindChildTraverse("TeamNeutralItems").style.margin = "0px; 0px; 0px; 0px";

        for (var ff of newUI.FindChildTraverse("TeamNeutralItems").FindChildrenWithClassTraverse("TeamNeutralTokensTitle")) 
        {
            ff.style.visibility = "collapse";
        }
        
        newUI.FindChildTraverse("TeamNeutralItems").FindChildTraverse("TeamNeutralTokensList").style.visibility = "collapse";
        newUI.FindChildTraverse("TeamNeutralItems").FindChildTraverse("ViewAllButton").style.visibility = "collapse";

        //
        // Disable Radar and Glyph buttons
        //

        newUI.FindChildTraverse("GlyphScanContainer").style.visibility = "collapse";
        
        //
        //
        //  Most of the code where im trying to change normal shop panorama associated with the secretshop.
        //
        //

        function MainUIwithLoop()
        {
            //
            // Removing the secret shop icon. (First Tab / First Line of Items)
            //

            for (var ff of newUI.FindChildTraverse("GridBasicItemsCategory").FindChildTraverse("ShopItemsContainer").FindChildrenWithClassTraverse("SecretShopItem")) 
            {
                ff.FindChildTraverse("SecretShop").style.visibility = "collapse";
            }

            //
            // Removing the secret shop icon. (Second Tab / First Line of Items)
            //

            for (var ff of newUI.FindChildTraverse("GridUpgradesCategory").FindChildTraverse("ShopItemsContainer").FindChildrenWithClassTraverse("SecretShopItem")) 
            {
                ff.FindChildTraverse("SecretShop").style.visibility = "collapse";
            }

            //
            // Changing the icon borders. (First Tab / First Line of Items)
            //

            for (var ff of newUI.FindChildTraverse("GridBasicItemsCategory").FindChildTraverse("ShopItemsContainer").FindChildrenWithClassTraverse("SecretShopItem")) 
            {
                ff.FindChildTraverse("CanPurchaseOverlay").style["background-image"] = "url('https://github.com/Pugik/dotan-pug/blob/main/dotan_icons/shopborder_custom_secret.png?raw=true')"
            }

            for (var ff of newUI.FindChildTraverse("GridBasicItemsCategory").FindChildTraverse("ShopItemsContainer").FindChildrenWithClassTraverse("CanPurchase")) 
            {
                ff.FindChildTraverse("CanPurchaseOverlay").style["background-image"] = "url('s2r://panorama/images/hud/shopborder_canpurchase_psd.vtex')"
            }

            //
            // Changing the icon borders. (Second Tab / First Line of Items)
            //

            for (var ff of newUI.FindChildTraverse("GridUpgradesCategory").FindChildTraverse("ShopItemsContainer").FindChildrenWithClassTraverse("SecretShopItem")) 
            {              
                //
                // idk, github must have, because there's something wrong with the vtex or my code.
                //
                ff.FindChildTraverse("CanPurchaseOverlay").style["background-image"] = "url('https://github.com/Pugik/dotan-pug/blob/main/dotan_icons/shopborder_custom_secret.png?raw=true')"


                //
                // idk, vtex doesn't want to work, maybe im stupid.
                //

                //ff.FindChildTraverse("CanPurchaseOverlay").style["background-image"] = "url('s2r://panorama/images/custom_game/hud/shopborder_nosecret_custom.png')";
            }

            for (var ff of newUI.FindChildTraverse("GridUpgradesCategory").FindChildTraverse("ShopItemsContainer").FindChildrenWithClassTraverse("CanPurchase")) 
            {              
                ff.FindChildTraverse("CanPurchaseOverlay").style["background-image"] = "url('s2r://panorama/images/hud/shopborder_canpurchase_psd.vtex')"
            }

            //
            // Changing the icon borders. (Anchored Items)
            //

            for (var ff of newUI.FindChildTraverse("ItemCombinesAndBasicItemsContainer").FindChildTraverse("ItemList").FindChildrenWithClassTraverse("SecretShopItem")) 
            {
                ff.FindChildTraverse("CanPurchaseOverlay").style["background-image"] = "url('https://github.com/Pugik/dotan-pug/blob/main/dotan_icons/shopborder_custom_secret.png?raw=true')"
            }

            for (var ff of newUI.FindChildTraverse("ItemCombinesAndBasicItemsContainer").FindChildTraverse("ItemList").FindChildrenWithClassTraverse("CanPurchase")) 
            {
                ff.FindChildTraverse("CanPurchaseOverlay").style["background-image"] = "url('s2r://panorama/images/hud/shopborder_canpurchase_psd.vtex')"
            }

            //
            // Changing the icon borders. (Reciped Items)
            //

            for (var ff of newUI.FindChildTraverse("ItemCombinesAndBasicItemsContainer").FindChildTraverse("ItemsContainer").FindChildrenWithClassTraverse("SecretShopItem")) 
            {
                ff.FindChildTraverse("CanPurchaseOverlay").style["background-image"] = "url('https://github.com/Pugik/dotan-pug/blob/main/dotan_icons/shopborder_custom_secret.png?raw=true')"
            }

            for (var ff of newUI.FindChildTraverse("ItemCombinesAndBasicItemsContainer").FindChildTraverse("ItemsContainer").FindChildrenWithClassTraverse("CanPurchase")) 
            {
                ff.FindChildTraverse("CanPurchaseOverlay").style["background-image"] = "url('s2r://panorama/images/hud/shopborder_canpurchase_psd.vtex')"
            }

            //
            // Changing the icon borders. (Quickbuy Items)
            //

            for (var ff of newUI.FindChildTraverse("QuickBuyRows").FindChildTraverse("Row0").FindChildrenWithClassTraverse("QuickBuySlot")) 
            {
                for (var ff of ff.FindChildrenWithClassTraverse("SecretShopItem"))
                {
                    ff.FindChildTraverse("CanPurchaseOverlay").style["background-image"] = "url('https://github.com/Pugik/dotan-pug/blob/main/dotan_icons/shopborder_custom_secret.png?raw=true')"
                }
            }

            for (var ff of newUI.FindChildTraverse("QuickBuyRows").FindChildTraverse("Row0").FindChildrenWithClassTraverse("QuickBuySlot")) 
            {
                for (var ff of ff.FindChildrenWithClassTraverse("CanPurchase"))
                {
                    ff.FindChildTraverse("CanPurchaseOverlay").style["background-image"] = "url('s2r://panorama/images/hud/shopborder_canpurchase_psd.vtex')"
                }
            }

            for (var ff of newUI.FindChildTraverse("QuickBuyRows").FindChildTraverse("Row1").FindChildrenWithClassTraverse("QuickBuySlot")) 
            {
                for (var ff of ff.FindChildrenWithClassTraverse("SecretShopItem"))
                {
                    ff.FindChildTraverse("CanPurchaseOverlay").style["background-image"] = "url('https://github.com/Pugik/dotan-pug/blob/main/dotan_icons/shopborder_custom_secret.png?raw=true')"
                }
            }

            for (var ff of newUI.FindChildTraverse("QuickBuyRows").FindChildTraverse("Row1").FindChildrenWithClassTraverse("QuickBuySlot")) 
            {
                for (var ff of ff.FindChildrenWithClassTraverse("CanPurchase"))
                {
                    ff.FindChildTraverse("CanPurchaseOverlay").style["background-image"] = "url('s2r://panorama/images/hud/shopborder_canpurchase_psd.vtex')"
                }
            }

            //
            // Removing the secret shop icon and changing the icon borders. (Guide Items)
            //

            for (var ff of newUI.FindChildTraverse("ItemBuild").FindChildTraverse("Categories").FindChildrenWithClassTraverse("SecretShopItem")) 
            {
                ff.FindChildTraverse("CanPurchaseOverlay").style["background-image"] = "url('https://github.com/Pugik/dotan-pug/blob/main/dotan_icons/shopborder_custom_secret.png?raw=true')"
            
                ff.FindChildTraverse("SecretShop").style.visibility = "collapse";
            }

            for (var ff of newUI.FindChildTraverse("ItemBuild").FindChildTraverse("Categories").FindChildrenWithClassTraverse("CanPurchase")) 
            {
                ff.FindChildTraverse("CanPurchaseOverlay").style["background-image"] = "url('s2r://panorama/images/hud/shopborder_canpurchase_psd.vtex')"
            
                ff.FindChildTraverse("SecretShop").style.visibility = "collapse";
            }

            //
            // Fix column grid in shop.
            //

            if ( !newUI.FindChildTraverse("shop").BHasClass("ShopLarge") && newUI.FindChildTraverse("shop").BHasClass("ShopOpen") )
            {
                newUI.FindChildTraverse("shop").AddClass("ShopLarge")
            }

            //
            // We need a constant loop or check (which idk how to write lul), because this panel is updated by player actions.
            //
            // TODO: try to do check, because "loop" sounds like bullshit.
            //

            $.Schedule(0.1, MainUIwithLoop) // idk how it affects at optimisation, idk how to do it any other way yet. cannyCat
        }

        if (Parent.FindChildTraverse("GameAndPlayersRoot") != undefined)
        {
            MainUIwithLoop();
        }
        else
        {
            $.Msg("Trying in MainUIwithLoop!");
            $.Schedule(1, MainUIwithLoop)
        }
 
        function TalantUI()
		{
            // 
            // Disable talant tree in scoreboard
            //
            if (newUI.FindChildTraverse("RadiantTeamContainer").FindChildTraverse("RadiantPlayer0") != null)
            {
                for (let i = 0; i < 5; i++) 
                {
                    newUI.FindChildTraverse("RadiantTeamContainer").FindChildTraverse("RadiantPlayer"+i).FindChildTraverse("TalentTree").style.visibility = "collapse";
                    newUI.FindChildTraverse("DireTeamContainer").FindChildTraverse("DirePlayer"+i).FindChildTraverse("TalentTree").style.visibility = "collapse";
                }

                for (var ff of newUI.FindChildTraverse("RadiantHeader").FindChildrenWithClassTraverse("TalentColumn")) 
                {
                    ff.style.visibility = "collapse";
                }

                for (var ff of newUI.FindChildTraverse("DireHeader").FindChildrenWithClassTraverse("TalentColumn")) 
                {
                    ff.style.visibility = "collapse";
                }
            }
            else
            {
                //$.Msg("Trying in TalantUI");
                $.Schedule(1, TalantUI)
            }
        }

        if (Parent.FindChildTraverse("GameAndPlayersRoot") != undefined)
        {
            TalantUI();
        }
        else
        {
            $.Msg("Trying in TalantUI!");
            $.Schedule(1, TalantUI)
        }

    </script>

    <Panel>
    </Panel>
</root>