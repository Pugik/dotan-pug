<root> 
  	<script>	
		//
        // Just find HUDElements in panorama
        //

        var newUI = $.GetContextPanel().GetParent().GetParent().FindChildTraverse("HUDElements");
		
        // 
        // Disable neutral tab
        //

		newUI.FindChildTraverse("GridMainTabs").FindChildTraverse("GridNeutralsTab").style.visibility = "collapse";

        //
        // Resize remaining shop tabs
        //

        newUI.FindChildTraverse("GridMainTabs").FindChildTraverse("GridBasicsTab").style.width = "200px";
        
        newUI.FindChildTraverse("GridMainTabs").FindChildTraverse("GridUpgradesTab").style.width = "200px";
        newUI.FindChildTraverse("GridMainTabs").FindChildTraverse("GridUpgradesTab").style.margin = "0.0px 0.0px 0.0px 0.0px";

        newUI.FindChildTraverse("Main").FindChildTraverse("HeightLimiter").FindChildTraverse("GridMainShop").FindChildTraverse("GridShopHeaders").style.padding = "0.0px 0.0px 0.0px 0.0px";

        // 
        // Legendary One Pixel Lift 
        //
        // Raised the list of items so that it is not on top of the anchored items.
        //

        newUI.FindChildTraverse("Main").FindChildTraverse("HeightLimiter").FindChildTraverse("GridMainShop").FindChildTraverse("GridMainShopContents").FindChildTraverse("GridBasicItemsCategory").FindChildTraverse("GridBasicItems").style.padding = "-3.0px 0.0px 0.0px 0.0px";
        newUI.FindChildTraverse("Main").FindChildTraverse("HeightLimiter").FindChildTraverse("GridMainShop").FindChildTraverse("GridMainShopContents").FindChildTraverse("GridUpgradesCategory").FindChildTraverse("GridUpgradeItems").style.padding = "-3.0px 0.0px 0.0px 0.0px";
	
        //
        // Stash Fix (volve hello?)
        //
        // why is the shop lift on the stash?
        //

        newUI.FindChildTraverse("lower_hud").FindChildTraverse("shop_launcher_block").FindChildTraverse("stash").style.margin = "0.0px 0.0px 46.0px 0.0px";
        
        //
        //
        //  Most of the code where im trying to change normal shop panorama associated with the secretshop.
        //
        //

        var Parent = $.GetContextPanel().GetParent().GetParent()

        function SecretUI()
		{
            if (Parent.FindChildTraverse("GameAndPlayersRoot") != undefined)
            {
                //Main

                //
                // Removing the secret shop icon and changing the icon borders. (First Tab / First Line of Items)
                //

                for (var ff of newUI.FindChildTraverse("GridBasicItemsCategory").FindChildTraverse("ShopItemsContainer").FindChildrenWithClassTraverse("SecretShopItem")) 
                {
                    ff.FindChildTraverse("SecretShop").style.visibility = "collapse";

                    ff.FindChildTraverse("CanPurchaseOverlay").style["background-image"] = "url('https://github.com/Pugik/kalodota2/blob/main/dotan_icons/shopborder_custom_secret.png?raw=true')"
                }

                //
                // Removing the secret shop icon and changing the icon borders. (Second Tab / Second Line of Items)
                //

                for (var ff of newUI.FindChildTraverse("GridUpgradesCategory").FindChildTraverse("ShopItemsContainer").FindChildrenWithClassTraverse("SecretShopItem")) 
                {
                    ff.FindChildTraverse("SecretShop").style.visibility = "collapse";
                    
                    //
                    // idk, github must have, because there's something wrong with the vtex or my code.
                    //
                    ff.FindChildTraverse("CanPurchaseOverlay").style["background-image"] = "url('https://github.com/Pugik/kalodota2/blob/main/dotan_icons/shopborder_custom_secret.png?raw=true')"


                    //
                    // idk, vtex doesn't want to work, maybe im stupid.
                    //

                    //ff.FindChildTraverse("CanPurchaseOverlay").style["background-image"] = "url('s2r://panorama/images/custom_game/hud/shopborder_nosecret_custom.png')";
                }
            }
            else
            {
                $.Msg("Trying!");
                $.Schedule(1, SecretUI)
            }
        }

        function SecretAnchoredandReciped()
        {
            if (Parent.FindChildTraverse("GameAndPlayersRoot") != undefined)
            {
                //
                // Removing the secret shop icon and changing the icon borders. (Anchored Items)
                //

                for (var ff of newUI.FindChildTraverse("ItemCombinesAndBasicItemsContainer").FindChildTraverse("ItemList").FindChildrenWithClassTraverse("SecretShopItem")) 
                {
                    ff.FindChildTraverse("CanPurchaseOverlay").style["background-image"] = "url('https://github.com/Pugik/kalodota2/blob/main/dotan_icons/shopborder_custom_secret.png?raw=true')"
                }

                //
                // Removing the secret shop icon and changing the icon borders. (Reciped Items)
                //

                for (var ff of newUI.FindChildTraverse("ItemCombinesAndBasicItemsContainer").FindChildTraverse("ItemsContainer").FindChildrenWithClassTraverse("SecretShopItem")) 
                {
                    ff.FindChildTraverse("CanPurchaseOverlay").style["background-image"] = "url('https://github.com/Pugik/kalodota2/blob/main/dotan_icons/shopborder_custom_secret.png?raw=true')"
                } 

                //
                // We need a constant loop or check (which idk how to write lul), because this panel is updated by player actions.
                //
                // TODO: try to do check, because "loop" sounds like bullshit.
                //

                $.Schedule(0.1, SecretAnchoredandReciped) // idk how it affects at optimisation, idk how to do it any other way yet. cannyCat
            }
            else
            {
                $.Msg("Trying!");
                $.Schedule(1, SecretAnchoredandReciped)
            }
        }

        SecretUI();
        SecretAnchoredandReciped();

    </script>

    <Panel>
    </Panel>
</root>